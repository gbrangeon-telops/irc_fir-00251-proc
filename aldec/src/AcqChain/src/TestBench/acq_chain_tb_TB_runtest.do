
setactivelib work
clearlibrary AcqChain

acom $FIR251COMMON/VHDL/tel2000pkg.vhd
acom $FIR251COMMON/VHDL/img_header_define.vhd

acom $FIR251COMMON/VHDL/Utilities/axis32_data_cnt.vhd
acom $FIR251PROC/IP/fwft_afifo_w28_d16/fwft_afifo_w28_d16_funcsim.vhdl
acom $FIR251PROC/IP/fwft_sfifo_w28_d16/fwft_sfifo_w28_d16_funcsim.vhdl
acom $FIR251PROC/IP/fwft_sfifo_w32_d16/fwft_sfifo_w32_d16_funcsim.vhdl
acom $FIR251PROC/IP/fwft_sfifo_w33_d16/fwft_sfifo_w33_d16_funcsim.vhdl
acom $FIR251PROC/IP/tdp_ram_w8_d2048/tdp_ram_w8_d2048_funcsim.vhdl
acom $FIR251PROC/IP/axi_uartlite_100MHz_921600/axi_uartlite_100MHz_921600_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_stream32_afifo_d512/t_axi4_stream32_afifo_d512_funcsim.vhdl
acom $FIR251PROC/IP/sfifo_w8_d64/sfifo_w8_d64_funcsim.vhdl
acom $FIR251PROC/IP/sfifo_w8_d16/sfifo_w8_d16_funcsim.vhdl
acom $FIR251PROC/IP/sp_ram_byte_w32_d64/sp_ram_byte_w32_d64_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_lite32_w_afifo_d16/t_axi4_lite32_w_afifo_d16_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_lite32_w_afifo_d64/t_axi4_lite32_w_afifo_d64_funcsim.vhdl
acom $FIR251PROC/IP/fwft_sfifo_w8_d16/fwft_sfifo_w8_d16_funcsim.vhdl
acom $FIR251COMMON/IP/axis_32_to_16/axis_32_to_16_funcsim.vhdl
acom $COMMON_HDL/Matlab/axi4_stream_file_output_32.vhd
acom $COMMON_HDL/Matlab/axi4_stream_file_output_16.vhd


-- acom $FIR251PROC/IP/t_axi4_stream16_sfifo_d16/t_axi4_stream16_sfifo_d16_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d16/t_axi4_stream32_sfifo_d16_funcsim.vhdl
-- acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d32/t_axi4_stream32_sfifo_d32_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d64/t_axi4_stream32_sfifo_d64_funcsim.vhdl
-- acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d128/t_axi4_stream32_sfifo_d128_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d256/t_axi4_stream32_sfifo_d256_funcsim.vhdl
-- acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d512/t_axi4_stream32_sfifo_d512_funcsim.vhdl
-- acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d1024/t_axi4_stream32_sfifo_d1024_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_stream32_sfifo_d2048/t_axi4_stream32_sfifo_d2048_funcsim.vhdl
-- acom $FIR251PROC/IP/t_axi4_stream32_afifo_d16/t_axi4_stream32_afifo_d16_funcsim.vhdl
acom $FIR251PROC/IP/t_axi4_stream32_afifo_d512/t_axi4_stream32_afifo_d512_funcsim.vhdl

#acom $FIR251PROC/IP/ip_axis_fi32tofp32/ip_axis_fi32tofp32_funcsim.vhdl
#acom $FIR251PROC/IP/ip_axis_fp32tofi32/ip_axis_fp32tofi32_funcsim.vhdl
#acom $FIR251PROC/IP/ip_axis32_fanout2/ip_axis32_fanout2_funcsim.vhdl
#acom $FIR251PROC/IP/ip_axis32_fanout3/ip_axis32_fanout3_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_add/ip_fp32_axis_add_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_divide/ip_fp32_axis_divide_funcsim.vhdl
#acom $FIR251PROC/IP/ip_axis_fi32tofp32/ip_axis_fi32tofp32_funcsim.vhdl
#acom $FIR251PROC/IP/ip_axis_fp32tofi32/ip_axis_fp32tofi32_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_add/ip_fp32_axis_add_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_mult/ip_fp32_axis_mult_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_sqroot/ip_fp32_axis_sqroot_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_subtract/ip_fp32_axis_subtract_funcsim.vhdl
#   
#acom $FIR251PROC/IP/ip_fp32_axis_sqroot/ip_fp32_axis_sqroot_funcsim.vhdl
#acom $FIR251PROC/IP/ip_fp32_axis_subtract/ip_fp32_axis_subtract_funcsim.vhdl
#acom $FIR251PROC/IP/tdp_ram_w32_d16384/tdp_ram_w32_d16384_funcsim.vhdl
#acom $FIR251PROC/IP/ip_axis16_merge_axis32/ip_axis16_merge_axis32_funcsim.vhdl 
#
#acom $FIR251COMMON/VHDL/Utilities/axis16_merge_axis32.vhd
#

#utilities
do $FIR251PROC/src/compil_utilities.do
-- do $FIR251PROC/src/Calibration/HDL/compile_common.do
                                                                                                                   
do $FIR251PROC/src/FPA/PelicanD/hdl/compil_PelicanD.do
do $FIR251PROC/src/FPA/ScorpiolwD/hdl/compil_ScorpiolwD.do
do $FIR251PROC/src/ExposureTime/hdl/compil_exposure_time.do
do $FIR251PROC/src/Hder/hdl/compil_hder_inserter.do
do $FIR251PROC/src/Trig/hdl/compil_trig_gen.do
#do $FIR251PROC/src/Calibration/HDL/compil_calibration.do

acom "$FIR251PROC/aldec/src/Testbench/SystemC/mb_model_wrapper.vhd"
#acom $FIR251PROC/aldec/src/AcqChain/src/pelicanD_core_dummy.vhd
#acom $FIR251PROC/aldec/src/AcqChain/src/PelicanD_dummy.bde
#acom $FIR251PROC/aldec/src/AcqChain/src/efa_00254_dummy.vhd 
#acom $FIR251COMMON/VHDL/Utilities/axis32_RandomMiso.vhd
                                                                     
# KERNEL: WARNING: NUMERIC_STD.TO_INTEGER: metavalue detected, returning 0
acom $FIR251COMMON/VHDL/Utilities/axis_32_to_16_wrap.vhd
acom $FIR251COMMON/VHDL/Utilities/axis16_to_axis32.vhd
acom $FIR251COMMON/VHDL/Utilities/axis16_data_cnt.vhd
acom $FIR251COMMON/VHDL/Utilities/axis32_data_cnt.vhd


###
##                                                                      
runexe "$FIR251PROC/src/copy_to_cpp.bat"
adel mb_model
cd $FIR251PROC/aldec/src/AcqChain/src
buildc acq_chain.dlm
addfile mb_model.dll
addsc mb_model.dll

acom $FIR251PROC/aldec/src/AcqChain/src/acq_chain_tb.bde
acom  $FIR251PROC/aldec/src/AcqChain/src/TestBench/acq_chain_tb_TB.vhd
##                        
                                                                                
-- wave UUT/U1/U1/*                       

asim -ses acq_chain_tb_TB 
##
##-- add wave -noreg -hexadecimal -literal {/hder_inserter_top_tb_TB/U3/U1/MB_MOSI}
##
##-- PELICAND receveur config
-- wave UUT/U1/U4/*
##
##-- PELICAND detecteur freq_id
-- wave UUT/U1/U7/*
##
##-- trig controller
-- wave UUT/U1/U1/*


##-- sequenceur
-- wave UUT/U1/U2/*  
##
##-- frame io interface
-- wave UUT/U1/U19/*            
#
##-- hw driver sequencer
-- wave UUT/U1/U5/U1/*                   
#
##-- hw serial module--
#wave UUT/U1/U5/U2/*                   
#
##-- hw uart block--
#-- wave UUT/U1/U5/U6/* 
#
##-- hw ram
#-- wave UUT/U1/U5/U3/*                     
#                    
##-- stat gen
-- wave UUT/U1/U6/* 
#
##-- diag data gen
-- wave UUT/U1/U9/U1/*
#
##-- PELICAND  data dispatcher
#wave UUT/U1/U9/U6/*
#
##-- dout fifo
#-- wave UUT/U1/U8/* 
#
##-- fifo writer
#wave UUT/U1/U9/U2/*  
#
##hw driver
##wave UUT/U1/U5/*
#
##top level pelicanD
#-- wave UUT/U1/*

##Core Dummy--
-- wave UUT/U7/U7/* 

## efa  254--
-- wave UUT/U6/* 

## Dummy uart-
-- wave UUT/U7/U6/* 

## Dummy data gen-
#wave UUT/U7/U3/* 

## hder inserter
-- wave UUT/U3/U5/* 

## hder inserter sequencer
-- wave UUT/U3/U4/* 

## hder inserter : trig header fifo
-- wave UUT/U3/U6/*

-- wave UUT/U11/U25/*
-- wave UUT/U12/*  
-- wave UUT/U13/*
#wave UUT/U3/U19/*
wave UUT/U14/* 
wave UUT/U15/*
wave UUT/U16/*
#wave UUT/U11/U2/U2/*
#wave UUT/U11/U17/* 

wave UUT/U3/U20/*
 
#wave UUT/U11/U28/*
#wave UUT/U11/U10/*
wave UUT/U11/U18/* 
#wave UUT/U11/U36/*



run 2.5 ms